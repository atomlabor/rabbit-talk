<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rabbit-talk</title>
    <!-- Tailwind CSS CDN für einfache und schnelle Gestaltung -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome für Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
        }
        .chat-container {
            height: calc(100vh - 12rem); /* Dynamische Höhe für den Nachrichtenbereich */
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE und Edge */
        }
        .chat-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        /* Stil für Bildnachrichten */
        .message-image {
            max-width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin-top: 0.5rem;
        }
        /* Touch-freundliche Styles für Buttons und Inputs */
        .btn-touch {
            min-width: 48px;
            min-height: 48px;
            padding: 12px;
            border-radius: 12px;
        }
        .input-touch {
            min-height: 48px;
            padding: 12px;
            border-radius: 12px;
        }
        #language-selector {
            min-width: 48px;
            min-height: 48px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.7em top 50%;
            background-size: 1.5em;
        }
    </style>
</head>
<body class="flex flex-col h-screen p-4 sm:p-6 lg:p-8">
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <!-- (Optional: add Firebase services as needed, z.B. auth, firestore...) -->
    
    <script>
      // Hinweis: Die Platzhalter werden von deinem CI/CD automatisch durch Secrets ersetzt!
      const firebaseConfig = {
        apiKey: ${FIREBASE_API_KEY},
        authDomain: ${FIREBASE_AUTH_DOMAIN},
        projectId: ${FIREBASE_PROJECT_ID},
        storageBucket: ${FIREBASE_STORAGE_BUCKET},
        messagingSenderId: ${FIREBASE_MESSAGING_SENDER_ID},
        appId: ${FIREBASE_APP_ID}
      };
    
      // Überprüfungsblock: Wenn ein Wert wie "${FIREBASE_API_KEY}" übrig bleibt, gibt es ein Ersetzungsproblem:
      for (const [key, value] of Object.entries(firebaseConfig)) {
        if (value.startsWith("${") && value.endsWith("}")) {
          console.error(`Firebase-Konfig-Fehler: Platzhalter für ${key} wurde nicht ersetzt!`);
        }
      }
    
      // Firebase initialisieren (nur, wenn alles ersetzt ist)
      if (firebaseConfig.apiKey && !firebaseConfig.apiKey.startsWith("${")) {
        firebase.initializeApp(firebaseConfig);
        // Optional: weitere Firebase-Dienste initialisieren...
        // z.B.: const db = firebase.firestore();
      } else {
        document.body.insertAdjacentHTML('afterbegin', `<div style="background:#fdd;color:#900;font-weight:bold;padding:12px;margin-bottom:12px;">Fehler beim Laden der Firebase-Konfiguration. Bitte prüfe deine GitHub-Secrets und den CI/CD-Prozess.</div>`);
      }
    </script>
    
    <div class="flex-grow flex flex-col max-w-lg mx-auto w-full">
        <!-- App-Titel und Benutzer-ID -->
